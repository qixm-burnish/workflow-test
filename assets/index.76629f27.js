var r;import e from"./DetailModal.a6124dfe.js";import{_ as o}from"./TableImg.7236490e.js";import{g as i}from"./BasicForm.1ee9860e.js";import{u as t}from"./useTable.c5811f65.js";import{b as a}from"./index.da9badfc.js";import{U as s,e as n,aB as d}from"./index.fec87d2a.js";import{getColumns as l}from"./data.e2de1562.js";import{z as c,r as m,Q as p,Y as f,n as u,Z as j,D as b,F as x,a7 as g,ao as y,G as v,H as E,w as h,a2 as w,a9 as D,J as C}from"./vendor.816c78c5.js";import"./index.0dd4659e.js";/* empty css              */import"./useDescription.3d68a313.js";/* empty css              *//* empty css              */import"./useForm.83c1a438.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./useWindowSizeFn.b43d7152.js";import"./onMountedOrActivated.3c82604a.js";/* empty css              */import"./useSortable.2b19f3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.bb9ea502.js";/* empty css              *//* empty css              *//* empty css              */import"./download.673915b1.js";import"./base64Conver.bb012c73.js";import"./index.7f9dc345.js";(r||(r={})).Error="/error";var L=c({name:"ErrorHandler",components:{DetailModal:e,BasicTable:o,TableAction:i},setup(){const e=m(),o=m([]),{t:i}=n(),c=d(),[j,{setTableData:b}]=t({title:i("sys.errorLog.tableTitle"),columns:l(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[x,{openModal:g}]=a();return p((()=>c.getErrorLogInfoList),(r=>{f((()=>{b(u(r))}))}),{immediate:!0}),{register:j,registerModal:x,handleDetail:function(r){e.value=r,g(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){o.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,o=null,i=function*(){yield s.get({url:r.Error})},new Promise(((r,t)=>{var a=r=>{try{n(i.next(r))}catch(e){t(e)}},s=r=>{try{n(i.throw(r))}catch(e){t(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);n((i=i.apply(e,o)).next())}));var e,o,i},imgList:o,rowInfo:e,t:i}}});const T={class:"p-4"};L.render=function(r,e,o,i,t,a){const s=j("DetailModal"),n=j("a-button"),d=j("TableAction"),l=j("BasicTable");return b(),x("div",T,[(b(!0),x(g,null,y(r.imgList,(r=>v((b(),x("img",{key:r,src:r},null,8,["src"])),[[E,!1]]))),128)),h(s,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),h(l,{onRegister:r.register,class:"error-handle-table"},{toolbar:w((()=>[h(n,{onClick:r.fireVueError,type:"primary"},{default:w((()=>[D(C(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),h(n,{onClick:r.fireResourceError,type:"primary"},{default:w((()=>[D(C(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),h(n,{onClick:r.fireAjaxError,type:"primary"},{default:w((()=>[D(C(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:w((({record:e})=>[h(d,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{L as default};
