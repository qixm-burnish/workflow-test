import{z as e,aW as a,aX as t,aY as s,aO as l,aZ as o,ak as n,a_ as i,a$ as r,b0 as d,b1 as c,b2 as u,b3 as m,r as g,N as f,j as p,t as y,u as x,Z as h,D as b,F,G as S,H as w,w as _,a2 as v,a8 as L,a9 as k,J as C,b4 as E,a7 as I}from"./vendor.816c78c5.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as D,u as R,a as T,L as j,b as B}from"./LoginFormTitle.3bb26a84.js";import{c as z,f as G,e as M,h as P}from"./index.fec87d2a.js";var N=e({name:"LoginForm",components:{[a.name]:a,[t.name]:t,Checkbox:s,Button:l,Form:o,FormItem:o.Item,Input:n,Divider:i,LoginFormTitle:D,InputPassword:n.Password,GithubFilled:r,WechatFilled:d,AlipayCircleFilled:c,GoogleCircleFilled:u,TwitterCircleFilled:m},setup(){const{t:e}=M(),{notification:a,createErrorModal:t}=P(),{prefixCls:s}=z("login"),l=G(),{setLoginState:o,getLoginState:n}=R(),{getFormRules:i}=T(),r=g(),d=g(!1),c=g(!1),u=f({account:"vben",password:"123456"}),{validForm:m}=B(r),h=p((()=>x(n)===j.LOGIN));return{t:e,prefixCls:s,formRef:r,formData:u,getFormRules:i,rememberMe:c,handleLogin:function(){return o=this,n=null,i=function*(){const o=yield m();if(o)try{d.value=!0;const t=yield l.login(y({password:o.password,username:o.account,mode:"none"}));t&&a.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${t.realName}`,duration:3})}catch(n){t({title:e("sys.api.errorTip"),content:n.message||e("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${s}`)||document.body})}finally{d.value=!1}},new Promise(((e,a)=>{var t=e=>{try{l(i.next(e))}catch(t){a(t)}},s=e=>{try{l(i.throw(e))}catch(t){a(t)}},l=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,s);l((i=i.apply(o,n)).next())}));var o,n,i},loading:d,setLoginState:o,LoginStateEnum:j,getShow:h}}});N.render=function(e,a,t,s,l,o){const n=h("LoginFormTitle"),i=h("Input"),r=h("FormItem"),d=h("InputPassword"),c=h("Checkbox"),u=h("ACol"),m=h("Button"),g=h("ARow"),f=h("Divider"),p=h("GithubFilled"),y=h("WechatFilled"),x=h("AlipayCircleFilled"),D=h("GoogleCircleFilled"),R=h("TwitterCircleFilled"),T=h("Form");return b(),F(I,null,[S(_(n,{class:"enter-x"},null,512),[[w,e.getShow]]),S(_(T,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef",onKeypress:E(e.handleLogin,["enter"])},{default:v((()=>[_(r,{name:"account",class:"enter-x"},{default:v((()=>[_(i,{size:"large",value:e.formData.account,"onUpdate:value":a[1]||(a[1]=a=>e.formData.account=a),placeholder:e.t("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),_(r,{name:"password",class:"enter-x"},{default:v((()=>[_(d,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":a[2]||(a[2]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),_(g,{class:"enter-x"},{default:v((()=>[_(u,{span:12},{default:v((()=>[_(r,null,{default:v((()=>[L(" No logic, you need to deal with it yourself "),_(c,{checked:e.rememberMe,"onUpdate:checked":a[3]||(a[3]=a=>e.rememberMe=a),size:"small"},{default:v((()=>[k(C(e.t("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),_(u,{span:12},{default:v((()=>[_(r,{style:{"text-align":"right"}},{default:v((()=>[L(" No logic, you need to deal with it yourself "),_(m,{type:"link",size:"small",onClick:a[4]||(a[4]=a=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:v((()=>[k(C(e.t("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),_(r,{class:"enter-x"},{default:v((()=>[_(m,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:v((()=>[k(C(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"]),L(' <Button size="large" class="mt-4 enter-x" block @click="handleRegister">\n        {{ t(\'sys.login.registerButton\') }}\n      </Button> ')])),_:1}),_(g,{class:"enter-x"},{default:v((()=>[_(u,{md:8,xs:24},{default:v((()=>[_(m,{block:"",onClick:a[5]||(a[5]=a=>e.setLoginState(e.LoginStateEnum.MOBILE))},{default:v((()=>[k(C(e.t("sys.login.mobileSignInFormTitle")),1)])),_:1})])),_:1}),_(u,{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:v((()=>[_(m,{block:"",onClick:a[6]||(a[6]=a=>e.setLoginState(e.LoginStateEnum.QR_CODE))},{default:v((()=>[k(C(e.t("sys.login.qrSignInFormTitle")),1)])),_:1})])),_:1}),_(u,{md:7,xs:24},{default:v((()=>[_(m,{block:"",onClick:a[7]||(a[7]=a=>e.setLoginState(e.LoginStateEnum.REGISTER))},{default:v((()=>[k(C(e.t("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),_(f,{class:"enter-x"},{default:v((()=>[k(C(e.t("sys.login.otherSignIn")),1)])),_:1}),_("div",{class:["flex justify-evenly enter-x",`${e.prefixCls}-sign-in-way`]},[_(p),_(y),_(x),_(D),_(R)],2)])),_:1},8,["model","rules","onKeypress"]),[[w,e.getShow]])],64)};export{N as default};
